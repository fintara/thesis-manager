{% set route = app.request.get('_route') %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>{% block title %}Welcome!{% endblock %}</title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
        <script src="https://use.fontawesome.com/0e53e6d1a4.js"></script>
        {% stylesheets filter='cssrewrite'
            'bundles/app/css/main.css'
            'bundles/app/css/tether.css'
            'bundles/app/css/tether-theme-basic.css'
        %}
        <link rel="stylesheet" href="{{ asset_url }}">
        {% endstylesheets %}

        <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
    </head>
    <body>
        {% block body %}

            {% block navbar %}
                <nav class="navbar navbar-full navbar-dark bg-primary">
                    <button class="navbar-toggler hidden-lg-up" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"></button>
                    <div class="collapse navbar-toggleable-md" id="navbarResponsive">
                        <a class="navbar-brand" href="{{ url('app_home_get') }}">Thesis Manager</a>
                        <div class="container">
                            <ul class="nav navbar-nav">
                                <li class="nav-item {% if route == 'app_home_get' %}active{% endif %}">
                                    <a class="nav-link" href="{{ url('app_home_get') }}"><span class="fa fa-home"></span></a>
                                </li>
                                {% if is_granted('ROLE_STUDENT') %}
                                <li class="nav-item {% if route == 'app_topics_get' %}active{% endif %}">
                                    <a class="nav-link" href="{{ url('app_topics_get') }}">Topics</a>
                                </li>
                                {% endif %}

                                {% if is_granted('ROLE_DEAN') %}
                                <li class="nav-item {% if route == 'app_theses_get' %}active{% endif %}">
                                    <a class="nav-link" href="{{ url('app_theses_get') }}">Theses</a>
                                </li>
                                <li class="nav-item {% if route == 'app_theses_choose_reviewers_get' %}active{% endif %}">
                                    <a class="nav-link" href="{{ url('app_theses_choose_reviewers_get') }}">Choose Reviewers</a>
                                </li>
                                {% endif %}
                            </ul>

                            <ul class="nav navbar-nav float-lg-right">
                                {% if is_granted('ROLE_USER') %}{# logged in #}
                                    <li class="nav-item dropdown">
                                        <a class="nav-link dropdown-toggle" href="http://example.com" id="responsiveNavbarDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <span class="fa fa-user"></span>
                                            {{ app.user.fullName }} ({{ app.user.type }})
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="responsiveNavbarDropdown">
                                            <a class="dropdown-item" href="{{ url('app_logout') }}">
                                                <span class="fa fa-sign-out"></span> Logout
                                            </a>
                                        </div>
                                    </li>
                                {% else %}
                                    <li class="nav-item">
                                        <a class="nav-link" href="{{ url('app_login_get') }}">Login</a>
                                    </li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                </nav>
            {% endblock %}

            <div class="container-fluid">
                {% block content %}

                {% endblock %}

                {% block footer %}
                <div class="container">
                    <div class="footer">
                        <div class="copyright">
                            Thesis Manager &copy; 2017
                        </div>
                    </div>
                </div>
                {% endblock %}
            </div>

        {% endblock %}

        <script src="https://unpkg.com/vue/dist/vue.js"></script>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

        {% javascripts 'bundles/app/js/*' %}
        <script src="{{ asset_url }}"></script>
        {% endjavascripts %}

        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js" integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK" crossorigin="anonymous"></script>

        <script>
            $(function() {
                $('.dropdown-toggle').dropdown();
            });
        </script>
        {% block javascripts %}{% endblock %}
    </body>
</html>
